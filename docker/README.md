# Docker Configuration

Эта директория содержит все файлы, связанные с Docker-контейнеризацией бота.

## Файлы

- `Dockerfile` - Многостадийная сборка Docker образа с оптимизацией размера
- `docker-compose.yml` - Конфигурация для запуска с docker-compose
- `healthcheck.py` - Скрипт проверки состояния контейнера
- `README.md` - Документация (этот файл)

## Особенности Dockerfile

- **Многостадийная сборка**: Использует builder stage для компиляции psutil
- **Оптимизация размера**: Финальный образ не содержит build-зависимости
- **Безопасность**: Запуск от непривилегированного пользователя
- **Health check**: Встроенная проверка состояния

## Использование

### Запуск с docker-compose

```bash
# Из корневой директории проекта
cd docker
docker-compose up -d
```

### Сборка образа вручную

```bash
# Из корневой директории проекта
docker build -f docker/Dockerfile -t telegram-bot .
```

### Проверка health check

```bash
# Тест health check скрипта
python3 docker/healthcheck.py
```

## Health Check

Health check автоматически проверяет:
1. Наличие запущенного процесса бота (через psutil)
2. Если psutil недоступен - проверяет актуальность лог-файла (обновлен в течение 5 минут)

Проверка выполняется каждые 30 секунд с timeout 10 секунд.
